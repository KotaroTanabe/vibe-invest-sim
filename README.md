# 投資アルゴリズム可視化ツール

## 概要

## プロジェクト方針

* 本プロジェクトは生成AIにコードを書かせる（バイブコーディング）が主眼であり、コードの品質は二の次とします。
* 素早い機能実装とデモ公開を重視し、フィードバックループを回しながら改善します。

## バージョン管理

* 機能追加や修正を行う際は、必ずこのREADMEの『バージョン履歴』セクションを更新してください。
* Git管理下で履歴を残し、git tagは任意ですが、コミットメッセージやブランチ名で変更点を明確にしてください。

## バージョン履歴

* v0.1.0: 初期MVPデモ公開

## 概要

本ツールは、任意の投資アルゴリズムを過去の一定期間に対して適用し、その結果をWebブラウザ上でインタラクティブに可視化するためのメディアなし（静止画像ではなくライブラリによるチャート）ツールです。フロントエンドはシンプルなHTML/CSS/JavaScript構成で、チャート描画にはChart.jsなどの軽量ライブラリを用います。

## 主な機能

* 過去期間の株価／価格データの読み込み（CSVやAPI連携）
* 投資アルゴリズムのシミュレーション（初期投資：毎月1日に10万円ずつ追加）
* 累積投資額、資産推移、リターン率のチャート表示
* パラメータ設定（開始日、終了日、投資対象リストなど）のUI
* 結果の表形式でのダウンロード（CSV出力）

## 投資における仮定

* 毎月の最初（営業日に依存可）に10万円を現金として追加投資
* レバレッジなし（資金の範囲内で投資）
* 配当再投資はオプション設定可
* 手数料・スリッページ等のコストは考慮しない（後日拡張可）

## 技術スタック

* フロントエンド：HTML, CSS, JavaScript (ES6)
* チャート描画：Chart.js
* データ処理：JavaScript単体（ライブラリ不要）
* 開発ツール：Node.js（ローカルサーバー起動用）

## セットアップ手順

1. リポジトリをクローン

   ```bash
   git clone https://github.com/KotaroTanabe/vibe-invest-sim.git
   cd vibe-invest-sim
   ```
2. 依存ライブラリのインストール（ローカル開発用）

   ```bash
   npm install
   ```
3. 開発用サーバーの起動

   ```bash
   npm start
   ```
4. ブラウザで `http://localhost:3000` を開く

## 設定と使い方

1. **データの準備**：`data/` フォルダにシミュレーション対象のCSVファイルを配置。フォーマットは日付・終値などのヘッダー付き。
2. **アルゴリズム定義**：`src/algorithm.js` に任意の売買ロジックを実装。関数シグネチャは以下のとおり：

   ```js
   /**
    * @param {Array<{ date: string, price: number }>} history
    * @param {number} cashBalance
    * @param {Object} params
    * @returns {{ tradeDate: string, action: 'buy'|'sell', amount: number }}[]
    */
   export function simulateTrades(history, cashBalance, params) {
     // ここに投資アルゴリズムを書きます
   }
   ```
3. **パラメータ設定**：UIのフォームから開始日、終了日、月次追加額（デフォルト10万円）などを入力。
4. **シミュレーション実行**：`シミュレーション開始` ボタンを押すと、バックテストが実行され、チャートと表が更新されます。

## 可視化チャート

* 累積投資額と資産推移（折れ線グラフ）
* 月次リターン（棒グラフ）
* 総リターン率（数値表示）

## CSV出力

* シミュレーション結果をCSVでダウンロード可能。カラム例：日付、追加投資額、保有株数、評価額、累積投資額、累積リターン率。

## 実装計画

1. **環境構築（0.5日）**

   * リポジトリ作成と初期ファイル配置（`index.html`, `style.css`, `main.js`）
   * GitHub Pages 用の `gh-pages` ブランチ作成

### MVPデモ公開スケジュール

**目的**: 最低限の画面で月次追加投資チャートを表示し、GitHub Pages で公開

* **Day 1 (0.5日)**

  * `index.html` にシンプルな HTML 構造を作成
  * Chart.js CDN を読み込み、モックデータ（例: 月別価格配列）を用意
  * `main.js` でサンプルデータを Chart.js に渡して折れ線グラフを描画
  * ローカルで動作確認
* **Day 1 午後 (0.25日)**

  * リポジトリを GitHub に push
  * `gh-pages` を設定し、GitHub Pages で公開確認
* **Day 2 (0.5日)**

  * UI に開始日と終了日用の date input を追加（動的反映は次フェーズ）
  * モックの月次投資ロジック（毎月 100,000 円を累積投資額に足して、擬似リターンを計算）を `main.js` に組み込み
  * チャートに累積投資額と評価額の 2 系列を表示
  * 再度 Pages 上で動作確認
* **Day 3 (0.5日)**

  * README にデモ URL と簡易使い方を追記
  * デプロイ状況最終チェック

（合計：約1.75日）

## 拡張案

1. **環境構築（1日）**

   * リポジトリのクローンと依存関係インストール
   * 開発用サーバー（Node.js + Express等）の簡易セットアップ
2. **データ読み込みモジュール作成（2日）**

   * CSVパーサー（PapaParseなど）を組み込み
   * API取得用のデータフェッチ関数実装
   * モックデータによる動作確認
3. **バックテストエンジン実装（3日）**

   * `simulateTrades` 関数の骨組みを作成
   * 月次追加投資ロジックの実装
   * パラメータ（開始日・終了日・月額）反映
   * ユニットテスト作成（Jestなど）
4. **チャート描画機能実装（2日）**

   * Chart.js を使った折れ線・棒グラフコンポーネント作成
   * データバインディングとリアルタイム更新対応
5. **UI／UX 開発（2日）**

   * 入力フォーム（開始日・終了日・金額など）のレイアウト
   * ボタン操作によるシミュレーション起動フロー
   * ローディング／エラーハンドリング
6. **CSV出力機能実装（1日）**

   * シミュレーション結果からCSV生成（FileSaver.js など）
   * ダウンロードボタン配置
7. **総合テストとデプロイ準備（1日）**

   * ブラウザ(E2E)テスト（Cypressなど）
   * ドキュメント最終調整
   * GitHub Pages または Vercel へのデプロイ設定

## 拡張案

* API連携によるリアルタイムデータ取得
* 手数料・スリッページなどのコストモデル追加
* 複数銘柄同時シミュレーション
* レバレッジ・信用取引対応
* 配当再投資ロジック実装

## 貢献

プルリクエスト歓迎！Issueを立ててからご相談ください。

## ライセンス

MIT
